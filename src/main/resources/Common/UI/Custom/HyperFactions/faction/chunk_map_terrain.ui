// Territory Map Page - Terrain Mode
// Interactive 17x17 chunk grid with terrain imagery behind claim overlays
// Left-click wilderness to claim, right-click own territory to unclaim

$C = "../../Common.ui";
$S = "../shared/styles.ui";
$Nav = "../nav/nav_bar.ui";

$C.@PageOverlay {
  $Nav.@HyperFactionsNavBar #HyperFactionsNavBar {}

  $C.@DecoratedContainer {
    Anchor: (Width: 600, Height: 720);

    #Title {
      Group {
        $C.@Title {
          @Text = "Territory Map";
        }
      }
    }

    #Content {
      LayoutMode: Top;
      Padding: (Left: 10, Right: 10, Top: 8, Bottom: 8);

      // Position info at top
      Label #PositionInfo {
        Text: "Your Position: Chunk (0, 0)";
        Style: (FontSize: 13, TextColor: #00FFFF, RenderBold: true, HorizontalAlignment: Center);
        Anchor: (Height: 18, Bottom: 4);
      }

      // Grid area wrapper (free positioning so children keep their fixed sizes)
      Group #GridArea {
        Anchor: (Height: 544);

        // Terrain image layer - fixed 544x544, rendered at (0,0)
        Group #TerrainBg {
          Anchor: (Width: 544, Height: 544);
          Background: "../Map.png";
        }

        // Cell overlay layer - same position/size, on top of terrain
        Group #ChunkGrid {
          LayoutMode: Top;
          Anchor: (Width: 544, Height: 544);
        }
      }

      // Action hints
      Label #ActionHint {
        Text: "Left-click: Claim | Right-click: Unclaim";
        Style: (FontSize: 10, TextColor: #888888, HorizontalAlignment: Center);
        Anchor: (Height: 14, Top: 4, Bottom: 2);
      }

      // Divider
      Group {
        Anchor: (Height: 1, Bottom: 4);
        Background: (Color: #00AAAA);
      }

      // Compact legend (2 rows)
      Group #LegendContainer {
        LayoutMode: Top;
        Anchor: (Height: 32);

        // Row 1: Own, Ally, Enemy, Other
        Group {
          LayoutMode: Left;
          Anchor: (Height: 15);

          Group {
            LayoutMode: Left;
            Anchor: (Width: 110);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #4ade80); }
            Label { Text: " Your Territory"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Width: 100);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #60a5fa); }
            Label { Text: " Ally Territory"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Width: 110);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #f87171); }
            Label { Text: " Enemy Territory"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Width: 100);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #fbbf24); }
            Label { Text: " Other Faction"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
        }

        // Row 2: Safe, War, Player marker
        Group {
          LayoutMode: Left;
          Anchor: (Height: 15);

          Group {
            LayoutMode: Left;
            Anchor: (Width: 110);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #2dd4bf); }
            Label { Text: " Safe Zone"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Width: 100);
            Group { Anchor: (Width: 10, Height: 10); Background: (Color: #c084fc); }
            Label { Text: " War Zone"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
          Group {
            LayoutMode: Left;
            Anchor: (Width: 110);
            Label { Text: " + "; Style: (FontSize: 9, TextColor: #ffffff, RenderBold: true, VerticalAlignment: Center); Anchor: (Width: 14); }
            Label { Text: "You are here"; Style: (FontSize: 9, TextColor: #cccccc, VerticalAlignment: Center); }
          }
        }
      }

      // Divider
      Group {
        Anchor: (Height: 1, Top: 4, Bottom: 4);
        Background: (Color: #00AAAA);
      }

      // Bottom row: Claim and power info
      Group #BottomRow {
        LayoutMode: Left;
        Anchor: (Height: 24);

        // Claim stats (left side)
        Label #ClaimStats {
          Text: "Claims: 0/0 (0 Available)";
          Style: (FontSize: 11, TextColor: #FFAA00, RenderBold: true, VerticalAlignment: Center);
          Anchor: (Width: 220);
        }

        Label { FlexWeight: 1; }

        // Power status (right side)
        Label #PowerStatus {
          Text: "Power: 0/0";
          Style: (FontSize: 11, TextColor: #44CC44, VerticalAlignment: Center);
          Anchor: (Width: 180);
        }
      }
    }
  }
}

// Native Hytale back button (bottom-left ESC)
$C.@BackButton {}
